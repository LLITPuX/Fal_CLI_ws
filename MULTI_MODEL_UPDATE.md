# üöÄ Multi-Model Comparison Update

## –û–≥–ª—è–¥ –∑–º—ñ–Ω

–ü—Ä–æ–µ–∫—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –º–æ–¥–µ–ª–µ–π Gemini –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

## ‚ú® –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### 1. **–ë–∞–≥–∞—Ç–æ–º–æ–¥–µ–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
- ‚úÖ –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —Ç–µ–∫—Å—Ç—É —Ç—Ä—å–æ–º–∞ –º–æ–¥–µ–ª—è–º–∏:
  - `gemini-2.5-pro` (–Ω–∞–π—Ç–æ—á–Ω—ñ—à–∞)
  - `gemini-2.5-flash` (–∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–∞)
  - `gemini-2.5-flash-light` (–Ω–∞–π—à–≤–∏–¥—à–∞)

### 2. **–î–µ—Ç–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏**
- ‚è±Ô∏è **–ß–∞—Å –æ–±—Ä–æ–±–∫–∏** –∫–æ–∂–Ω–æ—ó –º–æ–¥–µ–ª—ñ (—Å–µ–∫—É–Ω–¥–∏)
- üì• **–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ**: –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∏–º–≤–æ–ª—ñ–≤ —Ç–∞ —Ç–æ–∫–µ–Ω—ñ–≤
- üì§ **–í–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ**: –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∏–º–≤–æ–ª—ñ–≤ —Ç–∞ —Ç–æ–∫–µ–Ω—ñ–≤
- üìä **–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å** –æ–±—Ä–æ–±–∫–∏ –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π

### 3. **–†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ç–∞–π–º–∞—É—Ç–∏**
- ‚è∞ –¢–∞–π–º–∞—É—Ç –Ω–∞ –º–æ–¥–µ–ª—å: **5 —Ö–≤–∏–ª–∏–Ω** (300 —Å–µ–∫—É–Ω–¥)
- ‚è∞ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —á–∞—Å: **15 —Ö–≤–∏–ª–∏–Ω** (–¥–ª—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –º–æ–¥–µ–ª–µ–π)

### 4. **–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π UI**
- üé® –û–∫—Ä–µ–º—ñ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –∫–æ–∂–Ω–æ—ó –º–æ–¥–µ–ª—ñ
- üìä –í—ñ–∑—É–∞–ª—å–Ω–∞ —Å—ñ—Ç–∫–∞ –º–µ—Ç—Ä–∏–∫
- ‚ùå –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –¥–ª—è –º–æ–¥–µ–ª–µ–π, —â–æ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø—ñ—à–Ω–∏—Ö/–Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–±

## üìù –ó–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ

### Backend

#### `backend/app/models/schemas.py`
```python
# –ù–æ–≤—ñ –º–æ–¥–µ–ª—ñ:
- ProcessingMetrics  # –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–æ–±–∫–∏
- ModelResult        # –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω—ñ—î—ó –º–æ–¥–µ–ª—ñ
- MultiModelResponse # –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑ —É—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π
```

#### `backend/app/core/config.py`
```python
gemini_timeout: int = 300  # 5 —Ö–≤–∏–ª–∏–Ω –Ω–∞ –º–æ–¥–µ–ª—å
gemini_models: list[str] = [
    "gemini-2.5-pro",
    "gemini-2.5-flash",
    "gemini-2.5-flash-light",
]
```

#### `backend/app/services/gemini_service.py`
- ‚úÖ –î–æ–¥–∞–Ω–æ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É –≤ `run_cli()`
- ‚úÖ –ù–æ–≤–∏–π –º–µ—Ç–æ–¥ `calculate_metrics()`
- ‚úÖ –†–æ–∑—à–∏—Ä–µ–Ω–æ `structure_text()` –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫

#### `backend/app/api/routes.py`
- ‚úÖ –ï–Ω–¥–ø–æ—ó–Ω—Ç `/structure` –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ 3 –º–æ–¥–µ–ª—ñ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –±–µ–∑ –∑—É–ø–∏–Ω–∫–∏ –Ω–∞ —ñ–Ω—à–∏—Ö –º–æ–¥–µ–ª—è—Ö
- ‚úÖ –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `MultiModelResponse`

### Frontend

#### `frontend/src/types/api.ts`
```typescript
// –ù–æ–≤—ñ —Ç–∏–ø–∏:
- ProcessingMetrics
- ModelResult
- MultiModelResponse
```

#### `frontend/src/components/JsonViewer.tsx`
- ‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–æ –¥–ª—è –±–∞–≥–∞—Ç–æ–º–æ–¥–µ–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ModelResultCard` –¥–ª—è –∫–æ–∂–Ω–æ—ó –º–æ–¥–µ–ª—ñ
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫ —É —Å—ñ—Ç—Ü—ñ
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥–µ–ª–µ–π

#### `frontend/src/App.tsx`
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞ –æ–ø–∏—Å–∏
- ‚úÖ –ù–æ–≤–∏–π loading state –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –º–æ–¥–µ–ª—ñ
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∏–π idle state –∑ –ø–µ—Ä–µ–ª—ñ–∫–æ–º –º–æ–¥–µ–ª–µ–π

#### `frontend/src/styles/App.css`
- ‚úÖ –°—Ç–∏–ª—ñ –¥–ª—è –º–µ—Ç—Ä–∏–∫ (`.metrics-grid`, `.metric`)
- ‚úÖ –°—Ç–∏–ª—ñ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–æ–¥–µ–ª–µ–π (`.models-comparison`)
- ‚úÖ –°—Ç–∏–ª—ñ –¥–ª—è –∫–∞—Ä—Ç–æ—á–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (`.model-result`)
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω

## üîß –ó–∞–ø—É—Å–∫ –æ–Ω–æ–≤–ª–µ–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env —Ñ–∞–π–ª
```ini
HOST_GEMINI_DIR=C:\Users\YourUser\.gemini
GEMINI_CLI=gemini
GEMINI_MODEL=gemini-2.5-flash  # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∑–∞–ø–∞—Å–Ω–∏–π
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
API_PORT=8000
FRONTEND_PORT=3000
```

### 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
```powershell
# –ó—É–ø–∏–Ω—ñ—Ç—å —ñ—Å–Ω—É—é—á—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker compose down

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ñ—Ç—å –æ–±—Ä–∞–∑–∏
docker compose build --no-cache

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å–∏
docker compose up -d

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
docker compose logs -f
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É
```powershell
# Health check
curl http://localhost:3000/api/health

# –í—ñ–¥–∫—Ä–∏–π—Ç–µ —É –±—Ä–∞—É–∑–µ—Ä—ñ
start http://localhost:3000
```

## üìä –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ß–µ—Ä–µ–∑ Web UI
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:3000
2. –í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —É textarea
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Structure Text"**
4. –ó–∞—á–µ–∫–∞–π—Ç–µ –¥–æ 15 —Ö–≤–∏–ª–∏–Ω (–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –æ–±—Å—è–≥—É —Ç–µ–∫—Å—Ç—É)
5. –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –º–æ–¥–µ–ª–µ–π –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### –ß–µ—Ä–µ–∑ API
```powershell
$body = @{
    text = "–í–∞—à —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É..."
} | ConvertTo-Json -Compress

$response = Invoke-RestMethod -Uri http://localhost:3000/api/structure `
    -Method Post `
    -ContentType "application/json; charset=utf-8" `
    -Body $body

# –†–µ–∑—É–ª—å—Ç–∞—Ç –º—ñ—Å—Ç–∏—Ç—å:
$response.results                          # –ú–∞—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (3 –º–æ–¥–µ–ª—ñ)
$response.total_processing_time_seconds    # –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å
```

## üéØ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

```json
{
  "results": [
    {
      "id": "abc123...",
      "json_path": "data/abc123.json",
      "data": {
        "title": "...",
        "date_iso": "2025-10-31",
        "summary": "...",
        "tags": [...],
        "sections": [...]
      },
      "metrics": {
        "model": "gemini-2.5-pro",
        "processing_time_seconds": 45.23,
        "input_characters": 1234,
        "output_characters": 567,
        "input_tokens_estimate": 308,
        "output_tokens_estimate": 141
      },
      "error": null
    },
    // ... —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–Ω—à–∏—Ö –º–æ–¥–µ–ª–µ–π
  ],
  "total_processing_time_seconds": 123.45
}
```

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

### –¢–∞–π–º–∞—É—Ç–∏
- –ö–æ–∂–Ω–∞ –º–æ–¥–µ–ª—å –º–∞—î **5 —Ö–≤–∏–ª–∏–Ω** –Ω–∞ –æ–±—Ä–æ–±–∫—É
- –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –º–æ–∂–µ —Å—è–≥–∞—Ç–∏ **15 —Ö–≤–∏–ª–∏–Ω**
- –Ø–∫—â–æ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –ø–∞–¥–∞—î, —ñ–Ω—à—ñ –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å —Ä–æ–±–æ—Ç—É

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- –Ø–∫—â–æ –º–æ–¥–µ–ª—å –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–∞, `error` –º—ñ—Å—Ç–∏—Ç—å –æ–ø–∏—Å –ø–æ–º–∏–ª–∫–∏
- `data` —Ç–∞ `metrics` –±—É–¥—É—Ç—å `null` –¥–ª—è –Ω–µ–≤–¥–∞–ª–∏—Ö –º–æ–¥–µ–ª–µ–π
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î –æ–±—Ä–æ–±–∫—É –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏

### –†–µ—Å—É—Ä—Å–∏
- –í—Å—ñ —Ç—Ä–∏ –º–æ–¥–µ–ª—ñ –ø—Ä–∞—Ü—é—é—Ç—å **–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ** (–Ω–µ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ)
- –ö–æ–∂–Ω–∞ –º–æ–¥–µ–ª—å —Å—Ç–≤–æ—Ä—é—î –æ–∫—Ä–µ–º–∏–π JSON —Ñ–∞–π–ª
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Docker volume `backend-data`

## üêõ Troubleshooting

### –¢–∞–π–º–∞—É—Ç –Ω–∞ –≤—Å—ñ—Ö –º–æ–¥–µ–ª—è—Ö
```powershell
# –ó–±—ñ–ª—å—à—Ç–µ —Ç–∞–π–º–∞—É—Ç —É backend/app/core/config.py
gemini_timeout: int = 600  # 10 —Ö–≤–∏–ª–∏–Ω

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ñ—Ç—å backend
docker compose build backend
docker compose up -d backend
```

### –û–¥–Ω–∞ –º–æ–¥–µ–ª—å –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–∞–¥–∞—î
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker compose logs backend`
- –ú–æ–∂–ª–∏–≤–æ, –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —É –≤–∞—à–æ–º—É —Ä–µ–≥—ñ–æ–Ω—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–≤–æ—Ç–∏ GCP –ø—Ä–æ–µ–∫—Ç—É

### UI –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
```powershell
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
# –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ñ—Ç—å frontend
docker compose build --no-cache frontend
docker compose up -d frontend
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∏–π —á–∞—Å –æ–±—Ä–æ–±–∫–∏ (500 —Å–∏–º–≤–æ–ª—ñ–≤):
- **gemini-2.5-pro**: 30-60 —Å–µ–∫—É–Ω–¥
- **gemini-2.5-flash**: 10-20 —Å–µ–∫—É–Ω–¥
- **gemini-2.5-flash-light**: 5-10 —Å–µ–∫—É–Ω–¥

### –û—Ü—ñ–Ω–∫–∞ —Ç–æ–∫–µ–Ω—ñ–≤:
- –§–æ—Ä–º—É–ª–∞: `characters / 4` (–ø—Ä–∏–±–ª–∏–∑–Ω–æ)
- –†–µ–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ:
- ‚úÖ –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —è–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ä—ñ–∑–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –û—Ü—ñ–Ω–∏—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –∫–æ–∂–Ω–æ—ó –º–æ–¥–µ–ª—ñ
- ‚úÖ –í–∏–±—Ä–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É –º–æ–¥–µ–ª—å –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–¥–∞—á
- ‚úÖ –ë–∞—á–∏—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ input/output
- ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–æ–∂–Ω–æ—ó –º–æ–¥–µ–ª—ñ –æ–∫—Ä–µ–º–æ

---

**–í–µ—Ä—Å—ñ—è:** 2.1.0  
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 31 –∂–æ–≤—Ç–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å—ñ –∑–º—ñ–Ω–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω—ñ

