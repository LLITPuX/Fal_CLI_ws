# Gemini Text Structurer

ะะพะดะตัะฝะธะน full-stack ะทะฐััะพััะฝะพะบ ะดะปั ะฟะตัะตัะฒะพัะตะฝะฝั ะฝะตััััะบัััะพะฒะฐะฝะพะณะพ ัะตะบััั ั ััััะบัััะพะฒะฐะฝะธะน JSON ะทะฐ ะดะพะฟะพะผะพะณะพั Google Gemini AI.

## ะะพะถะปะธะฒะพััั
- **ะัะทัะฐะปัะฝะธะน ะบะพะฝััััะบัะพั JSON-ััะตะผ** โ ััะฒะพััะนัะต ัะฐ ัะตะดะฐะณัะนัะต ััััะบัััั ะฑะตะท ัะธะทะธะบั ัะธะฝัะฐะบัะธัะฝะธั ะฟะพะผะธะปะพะบ
- **ะัะพะผะฐัะฝะต ัะตะดะฐะณัะฒะฐะฝะฝั ะฟะพะปัะฒ** โ ะดะพะดะฐะฒะฐะนัะต/ะทะผัะฝัะนัะต/ะฒะธะดะฐะปัะนัะต ะพะบัะตะผั ะฟะพะปั ัะตัะตะท ะทัััะฝั ัะพัะผะธ
- **ะะฑะตัะตะถะตะฝะฝั ัะฐะฑะปะพะฝัะฒ** โ ะทะฑะตััะณะฐะนัะต ัะปัะฑะปะตะฝั ััะตะผะธ ัะฐ ัะฒะธะดะบะพ ะทะฐะฒะฐะฝัะฐะถัะนัะต ัั
- **ะะธะฑัั ะผะพะดะตะปั Gemini** โ ะฟะตัะตะผะธะบะฐะฝะฝั ะผัะถ flash (15 RPM) ัะฐ pro (2 RPM) ะผะพะดะตะปัะผะธ
- **ะะฒัะพะผะฐัะธัะฝั timestamp** โ ะฟะพะปั `time`, `timestamp`, `processing_time` ะทะฐะฟะพะฒะฝัััััั ัะฐัะพะผ ะพะฑัะพะฑะบะธ
- **ะะธะฝะฐะผััะฝะฐ ะฒะฐะปัะดะฐััั** โ ะฟัะดััะธะผะบะฐ ะบะพัะธัััะฒะฐััะบะธั ััะตะผ ะฟะพััะด ะทั ััะฐะฝะดะฐััะฝะพั ััััะบัััะพั
- **ะัะธะฝััะพะฝะฝะธะน FastAPI backend** โ ะฟะพะฒะฝัััั async, ะผะพะดัะปัะฝะฐ ะฐััััะตะบัััะฐ
- **ะะพะฝัะตะนะฝะตัะธะทะฐััั Docker Compose** โ ะณะพัะพะฒะต production-ัััะตะฝะฝั

## ะััััะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโ
โ   Frontend      โ  HTTP   โ     Backend      โ  CLI    โ  Gemini AI     โ
โ   (React+TS)    โโโโโโโโโโถโ    (FastAPI)     โโโโโโโโโโถโ  (Google)      โ
โ   Port: 3000    โ         โ    Port: 8000    โ         โ                โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโ
        โ                            โ
        โ    Nginx Reverse Proxy     โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะขะตัะฝะพะปะพะณััะฝะธะน ััะตะบ

**Frontend**: React 18, TypeScript (strict mode), Vite, Nginx (production)

**Backend**: FastAPI 0.115+, Python 3.12, Pydantic v2, asyncio

**ะะฝััะฐััััะบัััะฐ**: Docker Compose, Gemini CLI (npm), multi-stage Dockerfile

## ะกัััะบัััะฐ ะฟัะพัะบัั

```
Gemini CLI/
โโโ backend/
โ   โโโ app/
โ   โ   โโโ api/              # REST endpoints
โ   โ   โโโ core/             # Config & exceptions
โ   โ   โโโ models/           # Pydantic schemas
โ   โ   โโโ services/         # Business logic
โ   โ   โโโ main.py           # FastAPI app
โ   โโโ Dockerfile
โ   โโโ requirements.txt
โโโ frontend/
โ   โโโ src/
โ   โ   โโโ components/
โ   โ   โโโ services/
โ   โ   โโโ types/
โ   โ   โโโ styles/
โ   โ   โโโ App.tsx
โ   โ   โโโ main.tsx
โ   โโโ nginx.conf
โ   โโโ Dockerfile
โ   โโโ package.json
โโโ docker-compose.yml
โโโ .env
โโโ README.md
```

## ะจะฒะธะดะบะธะน ััะฐัั

### ะะตัะตะดัะผะพะฒะธ
- Docker Desktop (Windows)
- ะะฐะปะฐััะพะฒะฐะฝั ะพะฑะปัะบะพะฒั ะดะฐะฝั Gemini CLI (`gemini configure` ั ะปะพะบะฐะปัะฝัะน ัะธััะตะผั)
- Google Cloud Project ID

### ะะปะพะฝัะฒะฐะฝะฝั ัะฐ ะฟะพัะฐัะบะพะฒะต ะฝะฐะปะฐัััะฒะฐะฝะฝั

```powershell
git clone <repo-url>
cd "Gemini CLI"

# ะกะบะพะฟััะฒะฐัะธ ัะฐะฑะปะพะฝ ะบะพะฝััะณััะฐััั
Copy-Item env.example .env

# ะัะดะบัะธัะธ ะดะปั ัะตะดะฐะณัะฒะฐะฝะฝั
notepad .env
```

### ะะพะฝััะณััะฐััั `.env`

ะะฐะฟะพะฒะฝััั ะบะปััะพะฒั ะทะผัะฝะฝั ัะตัะตะดะพะฒะธัะฐ:

```ini
HOST_GEMINI_DIR=C:\Users\YourUser\.gemini
GEMINI_CLI=gemini
GEMINI_MODEL=gemini-2.5-flash
GEMINI_MODELS=gemini-2.5-flash,gemini-2.5-pro
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
API_PORT=8000
FRONTEND_PORT=3000
VITE_GEMINI_MODEL=gemini-2.5-flash
```

> **ะัะฐะฒะธะปะฐ ะบะพะฝััะณััะฐััั ะผะพะดะตะปะตะน**
> - `GEMINI_MODEL` โ ะดะตัะพะปัะฝะต ะทะฝะฐัะตะฝะฝั ะดะปั ะฑะตะบะตะฝะดั, ัะบัะพ ะทะฐะฟะธั ะฝะต ะฟะตัะตะดะฐั `model`.
> - `GEMINI_MODELS` โ ัะฟะธัะพะบ ะดะพัััะฟะฝะธั ะผะพะดะตะปะตะน ัะตัะตะท ะบะพะผั. ะะพะถะต ะผัััะธัะธ ะพะดะฝั ะฐะฑะพ ะบัะปัะบะฐ ะฟะพะทะธััะน (ะฝะฐะฟัะธะบะปะฐะด, `gemini-2.5-flash,gemini-2.5-pro`).
> - `VITE_GEMINI_MODEL` โ ะผะพะดะตะปั, ะฟะพะฟะตัะตะดะฝัะพ ะพะฑัะฐะฝะฐ ั UI; ะฒะพะฝะฐ ะผะฐั ะฒัะพะดะธัะธ ะดะพ `GEMINI_MODELS`.
> - ะัะดััะธะผัะนัะต ัะธะฝััะพะฝัะทะฐััั ัะธั ัััะพั ะทะผัะฝะฝะธั ะฟัะธ ะดะพะดะฐะฒะฐะฝะฝั/ะฒะธะดะฐะปะตะฝะฝั ะผะพะดะตะปะตะน.

### ะะฐะฟััะบ ั Docker

```powershell
# ะะพะฒะฝะฐ ะทะฑััะบะฐ ะพะฑัะฐะทัะฒ
docker compose build --no-cache

# ะกัะฐัั ัะตัะฒัััะฒ
docker compose up -d

# ะะตัะตะณะปัะด ะปะพะณัะฒ
docker compose logs -f
```

### ะะพัััะฟ ะดะพ ะทะฐััะพััะฝะบั
- Frontend: http://localhost:3000
- Backend health: http://localhost:3000/api/health
- Swagger UI: http://localhost:3000/api/docs

## ะะธะบะพัะธััะฐะฝะฝั

### ะะตะฑ-ัะฝัะตััะตะนั

**ะะฐะทะพะฒะธะน ััะตะฝะฐััะน:**
1. ะัะดะบัะธะนัะต http://localhost:3000
2. ะััะฐะฒัะต ะฝะตััััะบัััะพะฒะฐะฝะธะน ัะตะบัั ั textarea
3. ะะฐัะธัะฝััั **Structure Text**
4. ะััะธะผะฐะนัะต ััััะบัััะพะฒะฐะฝะธะน ัะตะทัะปััะฐั ัะท ะผะพะถะปะธะฒัััั ะบะพะฟััะฒะฐะฝะฝั/ะทะฐะฒะฐะฝัะฐะถะตะฝะฝั

**ะะฐะปะฐัััะฒะฐะฝะฝั ะผะพะดะตะปั:**
1. ะะพะทะณะพัะฝััั **โถ Advanced Settings**
2. ะะฑะตัััั ะผะพะดะตะปั: `gemini-2.5-flash` (ัะฒะธะดัะฐ, 15 RPM) ะฐะฑะพ `gemini-2.5-pro` (ัะบััะฝััะฐ, 2 RPM)

**ะะพัะธัััะฒะฐััะบะฐ JSON-ััะตะผะฐ (ะฒัะทัะฐะปัะฝะธะน ะบะพะฝััััะบัะพั):**
1. ะะพะทะณะพัะฝััั **โถ Advanced Settings** โ **โถ ะะพัะธัััะฒะฐััะบะฐ JSON-ััะตะผะฐ**
2. ะะฐัะธัะฝััั **+ ะะพะดะฐัะธ ะฟะพะปะต** ะดะปั ััะฒะพัะตะฝะฝั ะฝะพะฒะพะณะพ ะฟะพะปั
3. ะะฐะฟะพะฒะฝััั ัะพัะผั:
   - **ะะฐะทะฒะฐ ะฟะพะปั** โ ะปะฐัะธะฝััะบั ะปััะตัะธ, ัะฝัะบะฐะปัะฝะต ัะผ'ั (ะฝะฐะฟัะธะบะปะฐะด, `author`, `category`, `time`)
   - **ะขะธะฟ ะดะฐะฝะธั** โ ะพะฑะตัััั ะทั ัะฟะธัะบั (string, number, boolean, array, object)
   - **ะะฟะธั** โ ะดะตัะฐะปัะฝะฐ ัะฝััััะบััั ะดะปั ะผะพะดะตะปั AI
   - **ะะฑะพะฒ'ัะทะบะพะฒะต** โ ะฟะพะทะฝะฐััะต, ัะบัะพ ะฟะพะปะต ะบัะธัะธัะฝะต
4. ะะตะดะฐะณัะนัะต ััะฝัััั ะฟะพะปั ัะตัะตะท ะบะฝะพะฟะบั **โ๏ธ**
5. ะะธะดะฐะปัะนัะต ะฝะตะฟะพัััะฑะฝั ัะตัะตะท **๐๏ธ**
6. ะะผัะฝัะนัะต ะฟะพััะดะพะบ ะฟะพะปัะฒ ะบะฝะพะฟะบะฐะผะธ **โ** ัะฐ **โ**
7. ะะฐัะธัะฝััั **โบ ะะตัะพะปั** ะดะปั ะฟะพะฒะตัะฝะตะฝะฝั ะดะพ ััะฐะฝะดะฐััะฝะพั ััะตะผะธ
8. ะะตัะตะณะปัะดะฐะนัะต ััะฝะฐะปัะฝะธะน JSON ั **ะะพะฟะตัะตะดะฝัะน ะฟะตัะตะณะปัะด JSON**

**ะะฑะตัะตะถะตะฝะฝั ัะฐะฑะปะพะฝัะฒ:**
1. ะกัะฒะพัััั ะฟะพัััะฑะฝั ััะตะผั ั ะฒัะทัะฐะปัะฝะพะผั ัะตะดะฐะบัะพัั
2. ะะฐัะธัะฝััั **๐พ ะะฑะตัะตะณัะธ** ั ะฑะปะพัั "ะะฑะตัะตะถะตะฝั ัะฐะฑะปะพะฝะธ"
3. ะะฒะตะดััั ะฝะฐะทะฒั ัะฐะฑะปะพะฝั
4. ะะฐะฒะฐะฝัะฐะถัะนัะต ะทะฑะตัะตะถะตะฝั ัะฐะฑะปะพะฝะธ ะบะฝะพะฟะบะพั **โ ะะฐะฒะฐะฝัะฐะถะธัะธ**
5. ะะบัะฟะพัััะนัะต ะฒัั ัะฐะฑะปะพะฝะธ ัะตัะตะท **๐ค ะะบัะฟะพัั** (JSON-ัะฐะนะป)
6. ะะผะฟะพัััะนัะต ัะตัะตะท **๐ฅ ะะผะฟะพัั**

> ๐ก **ะะฒัะพะผะฐัะธัะฝั ะฟะพะปั**  
> ะะพะปั ะท ัะผะตะฝะฐะผะธ `time`, `timestamp`, `processing_time` ะฐะฒัะพะผะฐัะธัะฝะพ ะทะฐะฟะพะฒะฝัััััั ัะฐัะพะผ ะพะฑัะพะฑะบะธ ะทะฐะฟะธัั (ัะพัะผะฐั `HH:MM:SS`).

### API

**Health Check**

```bash
curl http://localhost:3000/api/health
```

**Structure Text (ะฑะฐะทะพะฒะธะน ะทะฐะฟะธั)**

```powershell
$body = @{
    text = "ะะตััััะบัััะพะฒะฐะฝะธะน ัะตะบัั ะฟัะพ AI..."
    model = "gemini-2.5-flash"
} | ConvertTo-Json -Compress

Invoke-RestMethod -Uri http://localhost:3000/api/structure `
    -Method Post `
    -ContentType "application/json; charset=utf-8" `
    -Body $body
```

**Structure Text (ะท ะบะพัะธัััะฒะฐััะบะพั ััะตะผะพั)**

```powershell
$customSchema = @"
{
  "title": "string - Document title",
  "author": "string - Author name if mentioned",
  "time": "string - Processing timestamp (auto-filled)",
  "summary": "string - Brief summary",
  "tags": ["array of strings - Main keywords"]
}
"@

$body = @{
    text = "ะะตััััะบัััะพะฒะฐะฝะธะน ัะตะบัั ะฟัะพ AI..."
    model = "gemini-2.5-flash"
    custom_schema = $customSchema
} | ConvertTo-Json -Compress

Invoke-RestMethod -Uri http://localhost:3000/api/structure `
    -Method Post `
    -ContentType "application/json; charset=utf-8" `
    -Body $body
```

> **ะัะธะผััะบะฐ:** ะะพะปั `time`, `timestamp`, `processing_time` ะฐะฒัะพะผะฐัะธัะฝะพ ะทะฐะฟะพะฒะฝัััััั backend ัะฐัะพะผ ะพะฑัะพะฑะบะธ ั ัะพัะผะฐัั `HH:MM:SS`.

## ะะพะทัะพะฑะบะฐ

### Backend

```powershell
docker compose exec backend bash
pytest  # ะบะพะปะธ ัะตััะธ ะฑัะดััั ะดะพะดะฐะฝั
docker compose logs -f backend
```

### Frontend

```powershell
cd frontend
npm install
npm run dev
# ะฐะฑะพ ะฒัะตัะตะดะธะฝั ะบะพะฝัะตะนะฝะตัะฐ
docker compose exec frontend sh
```

### ะะตัะตะฒััะบะฐ ะทะฑััะบะธ

ะะตัะตะด ะบะพะถะฝะธะผ PR/ะบะพะผััะพะผ ััะพะฝัะตะฝะดั ะฒะธะบะพะฝัะนัะต ะฟัะพะดะฐะบัะฝ-ะทะฑััะบั:

```powershell
npm run build
```

ะฆะตะน ัะฐะผะธะน ะบัะพะบ ัะตะบะพะผะตะฝะดัััััั ะดะพะดะฐัะธ ะฒ CI, ัะพะฑ ะฒะธัะฒะปััะธ `tsc`/Vite-ะฟะพะผะธะปะบะธ ัะฐ ะฝะตะฒะธะบะพัะธััะฐะฝั ัะธะผะฒะพะปะธ.

## ะขะตัััะฒะฐะฝะฝั

**Backend**

```bash
pytest backend/tests/
pytest backend/tests/integration/
pytest --cov=app --cov-report=html
```

**Frontend**

```bash
npm test
npm run test:e2e
```

## ะฃััะฝะตะฝะฝั ะฝะตัะฟัะฐะฒะฝะพััะตะน

### ะขะธะฟะพะฒั ะฟะพะผะธะปะบะธ

**Model '...' is not allowed**
- ะะตัะตะฒัััะต, ัะพ ะฒะธะฑัะฐะฝะฐ ะผะพะดะตะปั ะดะพะดะฐะฝะฐ ะดะพ `GEMINI_MODELS` ั `.env`
- ะะตัะตะทะฑะตัััั ะบะพะฝัะตะนะฝะตัะธ: `docker compose up -d --build backend`

**CLI timeout (5 ัะฒะธะปะธะฝ)**
- ะะฑัะปััััั `gemini_timeout` ั `backend/app/core/config.py`
- ะะตััะฐัััะนัะต ะฑะตะบะตะฝะด: `docker compose restart backend`

**ะะพะปะต `time` ะฟะพะฒะตััะฐั `null`**
- ะฆะต ะพััะบัะฒะฐะฝะฐ ะฟะพะฒะตะดัะฝะบะฐ: ะฟะพะปะต ะฐะฒัะพะผะฐัะธัะฝะพ ะทะฐะฟะพะฒะฝัััััั backend ัะฐัะพะผ ะพะฑัะพะฑะบะธ
- ะฏะบัะพ ะฒัะต ะพะดะฝะพ `null` โ ะฟะตัะตะฒัััะต, ัะพ ะบะพะฝัะตะนะฝะตั ะฟะตัะตะทัะฑัะฐะฝะธะน ะฟััะปั ะพััะฐะฝะฝัั ะทะผัะฝ

**ะะตะผะฐั ะดะพัััะฟั ะดะพ Gemini API**
- ะะตัะตะบะพะฝะฐะนัะตัั, ัะพ ะพะฑะปัะบะพะฒั ะดะฐะฝั ะทะผะพะฝัะพะฒะฐะฝั ั `HOST_GEMINI_DIR`
- ะะฐะฟัััััั `gemini configure` ะปะพะบะฐะปัะฝะพ ะดะปั ะฝะฐะปะฐัััะฒะฐะฝะฝั
- ะะตัะตะฒัััะต `GOOGLE_CLOUD_PROJECT` ั `.env`

**ะัะทัะฐะปัะฝะธะน ัะตะดะฐะบัะพั ะฝะต ะทะฑะตััะณะฐั ะฟะพะปั**
- ะะตัะตะฒัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12) ะฝะฐ JavaScript-ะฟะพะผะธะปะบะธ
- ะัะธััััั localStorage: `localStorage.clear()` ั ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ
- ะะตัะตะทะฐะฒะฐะฝัะฐะถัะต ััะพััะฝะบั

## ะะพะฝััะพัะธะฝะณ ัะฐ ะปะพะณะธ

```powershell
# ะกัะฐััั ะบะพะฝัะตะนะฝะตััะฒ
docker compose ps

# Health-ะฟะตัะตะฒััะบะธ ะฒัะตัะตะดะธะฝั ะบะพะฝัะตะนะฝะตััะฒ
docker compose exec backend curl http://localhost:8000/health
docker compose exec frontend wget -q -O- http://localhost:80

# ะะพัะพัะฝั ะปะพะณะธ
docker compose logs -f
docker compose logs -f backend
docker compose logs -f frontend
```

## ะะฑะตัะตะถะตะฝะฝั ะดะฐะฝะธั
ะะตะทัะปััะฐัะธ ะทะฑะตััะณะฐััััั ั volume `backend-data`.

```powershell
docker volume ls
docker volume inspect gemini-cli_backend-data
docker run --rm -v gemini-cli_backend-data:/data -v ${PWD}:/backup alpine `
  tar czf /backup/data-backup.tar.gz /data
```

## ะะตะทะฟะตะบะฐ
- ะทะฐะฟััะบ ัะตัะฒัััะฒ ะฟัะด non-root ะบะพัะธัััะฒะฐัะตะผ ั ะบะพะฝัะตะนะฝะตัะฐั
- ะผะพะฝััะฒะฐะฝะฝั credential-ะดะธัะตะบัะพััะน ะปะธัะต ะฒ ัะตะถะธะผั read-only
- CORS ะฝะฐะปะฐััะพะฒะฐะฝะธะน ะฟัะด ััะพะฝัะตะฝะด
- ะฒะธะฝััะบะธ ัะฐ ะปะพะณัะฒะฐะฝะฝั ะฑะตะท ัััะปะธะฒะธั ะดะฐะฝะธั
- Pydantic ะณะฐัะฐะฝััั ะฒะฐะปัะดะฐััั ะฒะฒะตะดะตะฝะฝั

## ะะฝะตัะพะบ
1. ะะพััะธะผัะนัะตัั SOLID ัะฐ ะฐัะธะฝััะพะฝะฝะธั ะฟัะฐะบัะธะบ.
2. ะะธัััั ัะธะฟะธ (Python typing / TypeScript strict).
3. ะะพะดะฐะฒะฐะนัะต ัะตััะธ ะดะปั ะฝะพะฒะพั ะปะพะณัะบะธ.
4. ะะฝะพะฒะปัะนัะต ะดะพะบัะผะตะฝัะฐััั ัะฐ ะฟัะธะบะปะฐะดะธ.
5. ะะตัะตะฒัััะนัะต `npm run build` ะฟะตัะตะด ััะฒะพัะตะฝะฝัะผ PR.

## ะััะตะฝะทัั
MIT License

---

**ะะตัััั:** 2.0.0  
**ะััะฐะฝะฝั ะพะฝะพะฒะปะตะฝะฝั:** 1 ะปะธััะพะฟะฐะดะฐ 2025 ัะพะบั
